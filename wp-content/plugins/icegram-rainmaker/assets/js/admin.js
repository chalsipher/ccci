jQuery(function(){jQuery("#rm-form-tabs").tabs({activate:function(a,b){if(1==b.newTab.index()){var c=jQuery("#rm_style_selector").val()||"rm-form-style0";jQuery(".rm_grid").find('.rm_grid_item[data-style="'+c+'"]').addClass("rm_style_selected")}else 2==b.newTab.index()&&(jQuery(this).find("#rm_enable_list").trigger("change"),jQuery(this).find("#rm-list-provider").trigger("change"))}}).addClass("ui-tabs-vertical ui-helper-clearfix"),jQuery(".rm_grid").on("click",".rm_grid_item",function(){jQuery(".rm_grid_item").removeClass("rm_style_selected"),jQuery(this).addClass("rm_style_selected"),jQuery("#rm_style_selector").val(jQuery(this).data("style"))}),jQuery("#dialog_link, ul#icons li").hover(function(){jQuery(this).addClass("ui-state-hover")},function(){jQuery(this).removeClass("ui-state-hover")}),jQuery(document).on("change","#rm-list-provider",function(){var a=jQuery(this).val().toLowerCase();if(jQuery("#rm-list-details-container").html(""),"email_subscribers"!=a){jQuery("#rm-list-details").find(".rm-loader").show();var b="rm_get_"+a+"_data",c=jQuery("#post_ID").val(),d="action="+b+"&form_id="+c;jQuery.ajax({url:ajaxurl,data:d,method:"POST",dataType:"JSON",success:function(a){jQuery("#rm-list-details").find(".rm-loader").hide(),jQuery("#rm-list-details-container").html(a.data),jQuery(".help_tip").tipTip({attribute:"data-tip"})},error:function(a){console.log(a)}})}}),jQuery(document).on("change","#rm_enable_list",function(a){1==jQuery(this).is(":checked")?jQuery("#mailchimp_api_key").attr("required","required"):jQuery("#mailchimp_api_key").removeAttr("required")}),jQuery(document).on("change",".form_type",function(a){form_selected=jQuery("."+(jQuery('input:radio[name="form_data[type]"]:checked').val()||"subscription")+"_settings"),jQuery(".subscription_settings, .custom_settings, .contact_settings").not(form_selected).slideUp(),form_selected.slideDown()}),jQuery(".form_type").change(),jQuery(document).on("change keyup paste keydown","#mailchimp_api_key",function(a){var b=jQuery(this).val();""!==b?jQuery("#auth-mailchimp").removeAttr("disabled"):jQuery("#auth-mailchimp").attr("disabled","true")}),jQuery("body").on("click",".disconnect-mailer",function(){var a=jQuery(this).data("mailerslug");if(!confirm("Are you sure? If you disconnect, your previous campaigns syncing with "+a+" will be disconnected as well."))return!1;var b=jQuery(this).data("mailer"),c="rm_disconnect_"+b,d={action:c};jQuery.ajax({url:ajaxurl,data:d,type:"POST",dataType:"JSON",success:function(a){jQuery("#save-btn").attr("disabled","true"),"disconnected"==a.message&&"mailchimp"==b&&(jQuery("#mailchimp_api_key").show().val(""),jQuery(".mailchimp-list").html(""),jQuery(".mailchimp-double-optin").html(""),jQuery("#disconnect-mailchimp").replaceWith('<button id="auth-mailchimp" class="button button-secondary auth-button" disabled="true">Verify</button><br/><a href="http://kb.mailchimp.com/accounts/management/about-api-keys" target="_blank">Find / Generate your MailChimp API key</a>'),jQuery("#auth-mailchimp").attr("disabled","true")),jQuery(".rm-form-row").fadeIn("300"),jQuery(".rm-mailer-help").show()}})}),jQuery("body").on("click","#auth-mailchimp",function(a){a.preventDefault();var b=jQuery("#mailchimp_api_key").val(),c="rm_update_mailchimp_authentication",d=jQuery("input.mailchimp-double-optin:checked").val(),e={action:c,authentication_token:b,mailchimp_double_optin:d};jQuery.ajax({url:ajaxurl,data:e,type:"POST",dataType:"JSON",success:function(a){"success"==a.status&&(jQuery("#rm-list-details-container").html(a.message),jQuery(".help_tip").tipTip({attribute:"data-tip"}))},error:{}})})});